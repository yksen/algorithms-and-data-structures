\documentclass{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage[polish]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[margin=0.8in]{geometry}
\usepackage[edges]{forest}
\usepackage{listings}
\usepackage{multicol}

\begin{document}

\title{Algorytmy i struktury danych}
\author{}
\date{}
\maketitle

\section*{Lista zadań 6}

\subsection*{Zadanie 1}
Jakie informacje przechowujemy w węźle drzewa czerwono-czarnego?
Zadeklaruj strukturę \verb+RBTnode+ tak, by dziedziczyła z \verb+BSTnode+. Podaj definicję drzewa czerwono czarnego.
\begin{lstlisting}
    struct NodeBST
    {
        int32_t value;
        NodeBST* left;
        NodeBST* right;  
    };

    struct NodeRBT : public NodeBST
    {
        bool isBlack;
    };
\end{lstlisting}
Drzewo czerwono-czarne musi przestrzegać następujące wymagania:
\begin{enumerate}
    \item Każdy węzeł jest albo czerwony albo czarny.
    \item Korzeń jest czarny.
    \item Każdy liść (również nullptr) jest czarny.
    \item Czerwony węzeł ma czarne dzieci.
    \item Każda ścieżka od korzenia do liścia ma tę samą liczbę czarnych węzłów.
\end{enumerate}

\subsection*{Zadanie 2}
\begin{enumerate}[label=(\alph*)]
    \item Jaka może być minimalna, a jaka maksymalna ilość kluczy w drzewie czerwono-czarnym
          o ustalonej czarnej wysokości równej $h_B$?
          \begin{gather*}
              \text{min} = 2^{h_B-1} - 1 \\
              \text{max} = 2^{2(h_B-1)} - 1
          \end{gather*}
    \item Znajdź maksymalną i minimalną wartość stosunku ilości węzłów czerwonych do
          czarnych w drzewie czerwono-czarnym.
\end{enumerate}
\begin{multicols*}{2}
    \begin{center}
        min = $0/1$ \\[1ex]
        \begin{forest}
            for tree={circle, minimum size=3ex, inner sep=1pt, s sep=7mm, anchor=south, fill=black, text=white},
            []
        \end{forest}
    \end{center}
    \columnbreak
    \begin{center}
        max = $2/1$ \\[1ex]
        \begin{forest}
            for tree={circle, minimum size=3ex, inner sep=1pt, s sep=7mm, anchor=south, fill=black, text=white},
            [[, fill=red][, fill=red]]
        \end{forest}
    \end{center}
\end{multicols*}

\subsection*{Zadanie 3}
Uzasadnij posługując się rysunkiem i opisem, że operacje wykonywane w trakcie wstawiania
do drzewa czerwono-czarnego (rotacja i przekolorowanie) nie zmieniają ilości
czarnych węzłów, na żadnej ścieżce od korzenia do liścia.

\subsection*{Zadanie 4}
\begin{enumerate}[label=(\alph*)]
    \item Narysuj poprawne drzewo czerwono-czarne w którym na lewo od korzenia jest $1$
          węzeł a na prawo $7$ węzłów.
          \begin{center}
              \begin{forest}
                  for tree={circle, minimum size=3ex, inner sep=1pt, s sep=7mm, anchor=south, fill=black, text=white},
                  [[][, fill=red[[, fill=red][, fill=red]][[, fill=red][, fill=red]]]]
              \end{forest}
          \end{center}
    \item Czy istnieje poprawne drzewo czerwono-czarne, w którym na lewo od korzenia będzie
          $100$ razy mniej węzłów niż na prawo od korzenia?
          \begin{gather*}
              100 \left(2^{h_B-1}-1\right) < 2^{2(h_B-1)}-1
          \end{gather*}
          \begin{center}
              \begin{tabular}{c c c c}
                  $h_B-1$ & \textbf{min} & $100$ \textbf{min} & \textbf{max} \\
                  \hline
                  $1$     & $0$          & $0$                & $0$          \\
                  $2$     & $1$          & $100$              & $3$          \\
                  $3$     & $3$          & $300$              & $15$         \\
                  $4$     & $7$          & $700$              & $63$         \\
                  $5$     & $15$         & $1500$             & $255$        \\
                  $6$     & $31$         & $3100$             & $1023$       \\
                  $7$     & $63$         & $6300$             & $4095$       \\
                  $8$     & $127$        & $12700$            & $16383$      \\
              \end{tabular}
          \end{center}
          Istnieje takie drzewo czerwono-czarne, w którym na lewo od korzenia jest $100$ razy mniej węzłów niż na prawo.
          Dla czarnej wysokości $h_B=9$ po lewej stronie minimalnie może być $127$ węzłów, a po prawej $16383$.
          \begin{align*}
              100 \left(2^{8-1}-1\right) & < 2^{2(8-1)}-1 \\
              100 \left(2^{7}-1\right)   & < 2^{2(7)}-1   \\
              100 \left(127\right)       & < 2^{14}-1     \\
              12700                      & < 16383
          \end{align*}
\end{enumerate}

\pagebreak
\subsection*{Zadanie 5}
W poniższym drzewie czerwono-czarnym:
\begin{center}
    \begin{forest}
        for tree={circle, minimum size=3ex, inner sep=1pt, s sep=7mm, anchor=south, fill=black, text=white},
        [5[3, fill=red[1][4]][11[9, fill=red][, phantom]]]
    \end{forest}
\end{center}
\begin{enumerate}[label=-]
    \item wstaw do niego \verb+10+.
          \begin{center}
              \begin{forest}
                  [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, anchor=south, fill=black, text=white},
                  [5[3, fill=red[1][4]][11[9, fill=red[, phantom][10, fill=red]][, phantom]]]
                  [5[3, fill=red[1][4]][11[10, fill=red[9, fill=red][, phantom]][, phantom]]]
                  [5[3, fill=red[1][4]][10, fill=red[9, fill=red][11]]]
                  [5[3, fill=red[1][4]][10[9, fill=red][11, fill=red]]]
                  ]
              \end{forest}
          \end{center}
    \item usuń z wyjściowego drzewa \verb+1+.
          \begin{center}
              \begin{forest}
                  [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, anchor=south, fill=black, text=white},
                  [5[3, fill=red[, phantom][4]][10[9, fill=red][11, fill=red]]]
                  [5[3[, phantom][4, fill=red]][10[9, fill=red][11, fill=red]]]
                  ]
              \end{forest}
          \end{center}
\end{enumerate}

\pagebreak
\subsection*{Zadanie 6}
(3 pkt.) Do pustego drzewa czerwono-czarnego wstaw kolejno $20$ przypadkowych kluczy.
Następnie usuń je w tej samej kolejności w jakiej wstawiałeś. Przypadkowymi kluczami
są kolejne litery Twojego nazwiska, imienia i adresu. Zadanie wykonujemy na kartce
(lub w pliku) i oddajemy prowadzącemu. Zadanie jest obowiązkowe. \\
\begin{center}
    \textbf{Wstawianie} \\[1em]
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[, phantom][, phantom]]
        [K[A, fill=red][, phantom]]
        [K[A, fill=red][M, fill=red]]
        [K[A[, phantom][I, fill=red]][M]]
        [K[A[, phantom][I, fill=red]][M[L, fill=red][, phantom]]]
        [K[A[, phantom][I, fill=red]][M[L, fill=red][S, fill=red]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A, fill=red][I, fill=red]][M[L, fill=red][S, fill=red]]]
        [K[E[A, fill=red][I, fill=red]][M, fill=red[L[, phantom][L, fill=red]][S]]]
        [K[E, fill=red[A][I[E, fill=red][, phantom]]][M, fill=red[L[, phantom][L, fill=red]][S]]]
        [K[E, fill=red[A][G[E, fill=red][I, fill=red]]][M, fill=red[L[, phantom][L, fill=red]][S]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E, fill=red[A[, phantom][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[, phantom][L, fill=red]][S]]]
        [K[E, fill=red[A[, phantom][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[, phantom][L, fill=red]][S[P, fill=red][, phantom]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E, fill=red[A[, phantom][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[, phantom][L, fill=red]][P[O, fill=red][S, fill=red]]]]
        [K[E, fill=red[A[, phantom][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L, fill=red][L, fill=red]][P[O, fill=red][S, fill=red]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[, phantom][A, fill=red]][G[E, fill=red][I, fill=red]]][M[L[L, fill=red][L, fill=red]][P, fill=red[O][S[, phantom][S, fill=red]]]]]
        [K[E[A[, phantom][A, fill=red]][G[E, fill=red][I, fill=red]]][M[L, fill=red[L[K, fill=red][, phantom]][L]][P, fill=red[O][S[, phantom][S, fill=red]]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[A, fill=red][A, fill=red]][G[E, fill=red][I, fill=red]]][M[L, fill=red[L[K, fill=red][, phantom]][L]][P, fill=red[O][S[, phantom][S, fill=red]]]]]
        [K[E[A[A, fill=red][A, fill=red]][G[E, fill=red][I, fill=red]]][M[L, fill=red[L[K, fill=red][, phantom]][L]][P, fill=red[O][S[S, fill=red][W, fill=red]]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[A, fill=red][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L[K, fill=red][, phantom]][L]][P[O][S, fill=red[S[R, fill=red][, phantom]][W]]]]]
        [K[E[A[A, fill=red][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L[K, fill=red][, phantom]][L]][P[O[, phantom][O, fill=red]][S, fill=red[S[R, fill=red][, phantom]][W]]]]]
        ]
    \end{forest}
\end{center}

\pagebreak
\begin{center}
    \textbf{Usuwanie} \\[1em]
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[A, fill=red][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L[K, fill=red][, phantom]][L]][P[O][S, fill=red[S[R, fill=red][, phantom]][W]]]]]
        [K[E[A[A, fill=red][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L[K, fill=red][, phantom]][L]][P[O][S, fill=red[S][W]]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[A, fill=red][A, fill=red]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L[K, fill=red][, phantom]][L]][P[O][S[S, fill=red][, phantom]]]]]
        [K[E[A[A, fill=red][, phantom]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L[K, fill=red][, phantom]][L]][P[O][S[S, fill=red][, phantom]]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[A, fill=red][, phantom]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L][L]][P[O][S[S, fill=red][, phantom]]]]]
        [K[E[A[A, fill=red][, phantom]][G[E, fill=red][I, fill=red]]][M, fill=red[L[L][L]][P[O][S]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[A, fill=red][, phantom]][G[E, fill=red][I, fill=red]]][M[L[L, fill=red][, phantom]][P, fill=red[O][S]]]]
        [K[E[A[A, fill=red][, phantom]][G[E, fill=red][I, fill=red]]][M[L[L, fill=red][, phantom]][P[, phantom][S, fill=red]]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A[A, fill=red][, phantom]][G[E, fill=red][I, fill=red]]][M[L[L, fill=red][, phantom]][S]]]
        [K[E[A][G[E, fill=red][I, fill=red]]][M[L[L, fill=red][, phantom]][S]]]
        [K[E[A][I[E, fill=red][, phantom]]][M[L[L, fill=red][, phantom]][S]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[E[A][I]][M[L[L, fill=red][, phantom]][S]]]
        [K[E[A][I]][M[L][S]]]
        [K[I[A, fill=red][, phantom]][M, fill=red[L][S]]]
        [K[I[A, fill=red][, phantom]][M[L, fill=red][, phantom]]]
        ]
    \end{forest}
\end{center}
\begin{center}
    \begin{forest}
        [, phantom, for tree={circle, minimum size=3ex, inner sep=1pt, s sep=5mm, l sep=0mm, l=0mm, anchor=south, fill=black, text=white},
        [K[I[A, fill=red][, phantom]][M]]
        [K[A][M]]
        [K[A, fill=red][, phantom]]
        [K[, phantom][, phantom]]
        [n, fill=green[, phantom][, phantom]]
        ]
    \end{forest}
\end{center}

\pagebreak
\subsection*{Zadanie 7}
Analizując kod programu \verb+RBT.h+ udowodnij, że w trakcie wstawiania do drzewa czerwono-czarnego
wykonają się co najwyżej dwie rotacje. Czy tak samo jest w przypadku usuwania?

\subsection*{Zadanie 8}
Uzasadnij, że rozmiar stosu $(n = 100)$ przyjęty w procedurach \verb+insert+ i \verb+remove+ w pliku
\verb+RBnpnr.h+ nigdy nie okaże się za mały.

\end{document}